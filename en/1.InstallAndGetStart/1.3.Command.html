<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>wa command line - Wa-lang&#x27;s Manual</title>
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="Wa-lang&#x27;s Manual">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="../favicon.svg">
                        <link rel="shortcut icon" href="../favicon.png">
                <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
                <link rel="stylesheet" href="../css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="../fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../index.html">Wa-lang's manual</a></li><li class="chapter-item expanded affix "><a href="../preface.html">Preface</a></li><li class="chapter-item expanded "><a href="../1.InstallAndGetStart/index.html"><strong aria-hidden="true">1.</strong> 1.Install And Get Start</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../1.InstallAndGetStart/1.1.HelloWorld.html"><strong aria-hidden="true">1.1.</strong> hello world</a></li><li class="chapter-item expanded "><a href="../1.InstallAndGetStart/1.2.Install.html"><strong aria-hidden="true">1.2.</strong> Install Wa-lang Compiler</a></li><li class="chapter-item expanded "><a href="../1.InstallAndGetStart/1.3.Command.html" class="active"><strong aria-hidden="true">1.3.</strong> wa command line</a></li><li class="chapter-item expanded "><a href="../1.InstallAndGetStart/1.4.ProjectStructure.html"><strong aria-hidden="true">1.4.</strong> Project directory structure</a></li><li class="chapter-item expanded "><a href="../1.InstallAndGetStart/1.5.Plugins.html"><strong aria-hidden="true">1.5.</strong> Plug-ins for IDE</a></li></ol></li><li class="chapter-item expanded "><a href="../2.ProgramStructure/index.html"><strong aria-hidden="true">2.</strong> Program structure</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../2.ProgramStructure/2.1.GlobalDeclaration.html"><strong aria-hidden="true">2.1.</strong> Global declaration</a></li><li class="chapter-item expanded "><a href="../2.ProgramStructure/2.2.GlobalVariableDeclaration.html"><strong aria-hidden="true">2.2.</strong> Global variable declaration</a></li><li class="chapter-item expanded "><a href="../2.ProgramStructure/2.3.FunctionDeclaration.html"><strong aria-hidden="true">2.3.</strong> Function declaration</a></li><li class="chapter-item expanded "><a href="../2.ProgramStructure/2.4.ConstDeclaration.html"><strong aria-hidden="true">2.4.</strong> Constant declaration</a></li><li class="chapter-item expanded "><a href="../2.ProgramStructure/2.5.ImportDeclaration.html"><strong aria-hidden="true">2.5.</strong> Import declaration</a></li></ol></li><li class="chapter-item expanded "><a href="../3.BasicTypes/index.html"><strong aria-hidden="true">3.</strong> Basic types</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../3.BasicTypes/3.1.LocalVariableDeclaration.html"><strong aria-hidden="true">3.1.</strong> Local variable declaration</a></li><li class="chapter-item expanded "><a href="../3.BasicTypes/3.2.Integers.html"><strong aria-hidden="true">3.2.</strong> Integers</a></li><li class="chapter-item expanded "><a href="../3.BasicTypes/3.3.FloatingPointNumbers.html"><strong aria-hidden="true">3.3.</strong> Floating point number</a></li><li class="chapter-item expanded "><a href="../3.BasicTypes/3.4.String.html"><strong aria-hidden="true">3.4.</strong> String</a></li></ol></li><li class="chapter-item expanded "><a href="../4.Function/index.html"><strong aria-hidden="true">4.</strong> Function</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../4.Function/4.1.FunctionCall.html"><strong aria-hidden="true">4.1.</strong> Function call</a></li><li class="chapter-item expanded "><a href="../4.Function/4.2.FunctionValues.html"><strong aria-hidden="true">4.2.</strong> Function values</a></li><li class="chapter-item expanded "><a href="../4.Function/4.3.AnonymousFunctionsAndClosures.html"><strong aria-hidden="true">4.3.</strong> Anonymous functions and closures</a></li><li class="chapter-item expanded "><a href="../4.Function/4.4.ifStatements.html"><strong aria-hidden="true">4.4.</strong> if statements</a></li><li class="chapter-item expanded "><a href="../4.Function/4.5.forStatements.html"><strong aria-hidden="true">4.5.</strong> for statements</a></li><li class="chapter-item expanded "><a href="../4.Function/4.6.switchStatements.html"><strong aria-hidden="true">4.6.</strong> switch statements</a></li></ol></li><li class="chapter-item expanded "><a href="../5.CompositeTypes/index.html"><strong aria-hidden="true">5.</strong> Composite types</a></li><li class="chapter-item expanded "><a href="../6.CustomTypes/index.html"><strong aria-hidden="true">6.</strong> Custom types</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../6.CustomTypes/6.1.Structure.html"><strong aria-hidden="true">6.1.</strong> Structure</a></li><li class="chapter-item expanded "><a href="../6.CustomTypes/6.2.Method.html"><strong aria-hidden="true">6.2.</strong> Method</a></li><li class="chapter-item expanded "><a href="../6.CustomTypes/6.3.MethodValues.html"><strong aria-hidden="true">6.3.</strong> Method values</a></li><li class="chapter-item expanded "><a href="../6.CustomTypes/6.4.EmbeddedStructure.html"><strong aria-hidden="true">6.4.</strong> Embedded structure</a></li><li class="chapter-item expanded "><a href="../6.CustomTypes/6.5.AnonymousStructure.html"><strong aria-hidden="true">6.5.</strong> Anonymous structure</a></li></ol></li><li class="chapter-item expanded "><a href="../7.Interface/index.html"><strong aria-hidden="true">7.</strong> Interface</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../7.Interface/7.1.NullInterface.html"><strong aria-hidden="true">7.1.</strong> Null interface - universal wrapper</a></li><li class="chapter-item expanded "><a href="../7.Interface/7.2.Non-nullInterface.html"><strong aria-hidden="true">7.2.</strong> Non-null interface</a></li><li class="chapter-item expanded "><a href="../7.Interface/7.3.TypeAssertions.html"><strong aria-hidden="true">7.3.</strong> Summary of type assertions</a></li><li class="chapter-item expanded "><a href="../7.Interface/7.4.OtherFeatures.html"><strong aria-hidden="true">7.4.</strong> Other features of interface</a></li></ol></li></ol>            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title">Wa-lang&#x27;s Manual</h1>

                    <div class="right-buttons">
                                                <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        <a href="https://github.com/wa-lang/man" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                                                                        <a href="https://github.com/wa-lang/man/edit/master/./1.InstallAndGetStart/1.3.Command.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>
                        
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <p><em>The content on this page is written in Chinese, and then traslated into English by machine. More accurate traslations are welcome at: <a href="https://github.com/wa-lang/man/tree/master/en">https://github.com/wa-lang/man/tree/master/en</a></em></p>
<h2 id="13-wa-command-line"><a class="header" href="#13-wa-command-line">1.3. wa command line</a></h2>
<p>This section introduces the main functions of the <code>wa</code> command.</p>
<h3 id="131-help-message"><a class="header" href="#131-help-message">1.3.1. Help message</a></h3>
<p>Enter the <code>wa</code> command or <code>wa -h</code> to view command line help information, as follows:</p>
<pre><code>$ wa
NAME:
   Wa - Wa is a tool for managing Wa source code.

USAGE:
   wa [global options] command [command options] [arguments...]

VERSION:
   v0.8.1-mvp

COMMANDS:
   play   start Wa playground
   init   init a sketch Wa module
   build  compile Wa source code
   run    compile and run Wa program
   fmt    format Wa source code file
   test   test Wa packages
   yacc   generates parsers for LALR(1) grammars
   logo   print Wa text format logo

GLOBAL OPTIONS:
   --debug, -d              set debug mode (default: false)
   --trace value, -t value  set trace mode (*|app|compiler|loader)
   --help, -h               show help (default: false)
   --version, -v            print the version (default: false)

COPYRIGHT:
   Copyright 2018 The Wa Authors. All rights reserved.

See &quot;https://wa-lang.org&quot; for more information.
</code></pre>
<p>It has the following subcommands:</p>
<ul>
<li>play：Start the local version of the playground；</li>
<li>init: initialize a Wa-lang project;</li>
<li>build: compile Wa-lang program;</li>
<li>run: compile and execute the Wa-lang program;</li>
<li>fmt: format the Wa-lang source code file;</li>
<li>test: execute the unit test of the Wa-lang project;</li>
<li>yacc: The W-lang version of yacc, used to generate parser code for LALR(1) grammar rules;</li>
<li>logo: Print the logo in Wa-lang and text version.</li>
</ul>
<p>The build command has been shown in Section 1.1.1, and the play command has been shown in Section 1.2.5. This section briefly introduces other subcommands.</p>
<h3 id="132-initialize-project"><a class="header" href="#132-initialize-project">1.3.2 Initialize project</a></h3>
<p>In Section 1.1.1 we have shown that <code>wa run hello.wa</code> executes a Wa-lang program in a separate file. But a single-file Wa-lang program has a huge limitation - it has only one file and cannot reference non-standard library code. For larger Wa-lang it is recommended to organize them in project mode.</p>
<p>Use the <code>wa init</code> command to initialize a Wa project. Take a look at the command line help first:</p>
<pre><code>$ wa init -h
NAME:
   wa init - init a sketch Wa module

USAGE:
   wa init [command options] [arguments...]

OPTIONS:
   --name value, -n value     set app name (default: &quot;hello&quot;)
   --pkgpath value, -p value  set pkgpath file (default: &quot;myapp&quot;)
   --update, -u               update example (default: false)
   --help, -h                 show help (default: false)
</code></pre>
<p>This command has two important parameters, <code>-name</code> and <code>-pkgpath</code>, which correspond to the name of the project and the corresponding package path respectively. Each parameter has a default value, and you can use <code>wa init</code> to generate a hello project.</p>
<pre><code>$ wa init
$ tree hello
hello
├── LICENSE
├── README.md
├── src
│   ├── main.wa
│   ├── mymath
│   │   └── math.wa
│   ├── mypkg
│   │   └── pkg.wa
│   └── zz_test.wa
├── vendor
│   └── 3rdparty
│       └── pkg
│           └── pkg.wa
└── wa.mod

7 directories, 8 files
</code></pre>
<p>The structure of the project will be introduced in Section 1.4.</p>
<h3 id="133-compile-and-execute"><a class="header" href="#133-compile-and-execute">1.3.3 Compile and execute</a></h3>
<p>Enter the hello directory in the command line environment and enter <code>wa build</code> to build the wasm module in the output directory:</p>
<pre><code>$ wa build
$ tree output/
output/
├── hello.wasm
└── hello.wat

1 directory, 2 files
</code></pre>
<p>The default output is the WASI specificated <code>output/hello.wat</code> and <code>output/hello.wasm</code> files. The exported wasm module can be executed with standard tools. You can also use the <code>wa</code> command to execute:</p>
<pre><code>$ wa run ./output/hello.wasm
你好，凹语言！
5050
...
</code></pre>
<p>If you execute the <code>wa run</code> command without entry, it means that the current Wa-lang project will be compiled and executed. <code>output/hello.wasm</code> will be built first and then executed.</p>
<h3 id="134-format-code"><a class="header" href="#134-format-code">1.3.4 Format code</a></h3>
<p>The <code>wa fmt</code> command is used to format code, and its command line help information is as follows:</p>
<pre><code>$ wa fmt -h
NAME:
   wa fmt - format Wa source code file

USAGE:
   wa fmt [command options] [&lt;file.wa&gt;|&lt;path&gt;|&lt;path&gt;/...]

OPTIONS:
   --help, -h  show help (default: false)
</code></pre>
<p>The command line argument is the path to be formatted:</p>
<ul>
<li><code>wa fmt file.wa</code> formats the specified .wa file</li>
<li><code>wa fmt path</code> formats all .wa files in the specified directory</li>
<li><code>wa fmt path/...</code> recursively formats the .wa file in the specified path, including subdirectories</li>
</ul>
<p>If no parameters are specified, all .wa files in the current directory will be formatted by default. If the current directory belongs to the Wa-lang project, the .wa files in all subdirectories will be formatted by default.</p>
<h3 id="135-unit-test"><a class="header" href="#135-unit-test">1.3.5 Unit test</a></h3>
<p>The project generated by default will have a <code>src/zz_test.wa</code> test file with the following content:</p>
<pre><code class="language-wa">func TestSum {
    assert(sum(100) == 5050, &quot;sum(100) failed&quot;)
}

func ExampleSum {
    println(sum(100))

    // Output:
    // 5050
}
</code></pre>
<p>The result of testing <code>sum(100)</code> in the <code>TestSum</code> test function via the built-in <code>assert</code> function is 5050. In the <code>ExampleSum</code> example test function, pass <code>//Output:</code> to test that the output meets the expected results.</p>
<p>Execute the test through the <code>wa test</code> command in the command line environment of the project directory:</p>
<pre><code>$ wa test
ok   myapp 104ms
</code></pre>
<h3 id="136-wa-lang-version-of-yacc"><a class="header" href="#136-wa-lang-version-of-yacc">1.3.6 Wa-lang version of yacc</a></h3>
<p>yacc is a program for generating syntax parsers, a tool for compiler enthusiasts. The yacc of the Wa-lang language is transplanted from goyacc. For detailed usage, please refer to the <a href="https://wa-lang.org/smalltalk/st0021.html">related articles</a> in the SmallTalk section of the wa-lang official website .</p>
<h3 id="137-print-logo"><a class="header" href="#137-print-logo">1.3.7 Print Logo</a></h3>
<p><code>wa logo</code> can output some logo patterns in text format, and readers can explore by themselves through the <code>wa logo -h</code> command.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                                                    <a rel="prev" href="../1.InstallAndGetStart/1.2.Install.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        
                                                    <a rel="next" href="../1.InstallAndGetStart/1.4.ProjectStructure.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                                    <a rel="prev" href="../1.InstallAndGetStart/1.2.Install.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                
                                    <a rel="next" href="../1.InstallAndGetStart/1.4.ProjectStructure.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        
    </body>
</html>
